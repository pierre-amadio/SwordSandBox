1) Does (probably) not work on debian... Tested on RHEL7.
2) There is a problem with versification.
The function that get the number of verse per chapter behave as if it was a KJV module.
Versification in OSHB differ. Compare by example psalm 5. 

#Genanki python stuff

#git checkout https://github.com/kerrickstaley/genanki.git
git clone https://github.com/kerrickstaley/genanki.git
mkdir ~/dev/ankiswordstuff
virtualenv -p /usr/bin/python3 ~/dev/ankiswordstuff
. ~/dev/ankiswordstuff/bin/activate

cd genanki
python setup.py install

##################
#sword stuff
##################
#as root
mkdir /usr/local/sword
chown melmoth /usr/local/sword

#yum install cmake cmake-data openssl-devel curl-devel zlib-devel libidn-devel libicu-devel icu clucene-core-devel cppunit-devel swig  python3-devel gcc  gcc-c++
yum install cmake3 cmake3-data openssl-devel curl-devel zlib-devel libidn-devel libicu-devel icu clucene-core-devel cppunit-devel swig  python36-devel gcc  gcc-c++ 

#as the regular user:
# Lets get the svn tree so we can build the python3 module.
# https://src.fedoraproject.org/rpms/sword/blob/master/f/sword.spec
cd
cd tmp
svn co http://crosswire.org/svn/sword/trunk/
mv trunk sword-trunk
cd sword-trunk

mkdir build
cd build

cmake3 -DLIBSWORD_LIBRARY_TYPE=Shared \
       -DSWORD_PYTHON_3:BOOL=TRUE \
       -DSWORD_BUILD_UTILITIES="Yes" \
       -DLIBSWORD_SOVERSION=1.8 \
       -DCMAKE_INSTALL_PREFIX="/usr/local/sword" \
       -DSWORD_BUILD_TESTS=Yes \
       -DSWORD_BUILD_EXAMPLES=Yes \
       -DSWORD_PYTHON_INSTALL_DIR="/usr/local/sword/python3" \
       ..

make
make install
####################"


cat >> ~/dev/ankiswordstuff/env-sword-anki.sh <<EOF
export PATH=$PATH:/usr/local/sword/bin/
export LD_LIBRARY_PATH=/usr/local/sword/lib
export PKG_CONFIG_PATH=/usr/local/sword/lib/pkgconfig
export CPPFLAGS="-I/usr/local/sword/include/sword"
export PYTHONPATH=$PYTHONPATH:/usr/local/sword/python3/lib64/python3.4/site-packages
EOF

. ~/dev/ankiswordstuff/env-sword-anki.sh

##########################
Now let s use https://github.com/kerrickstaley/genanki

. ~/dev/ankiswordstuff/bin/activate
. ~/dev/ankiswordstuff/env-sword-anki.sh

pip install bs4
###################
# Check you can import the needed modules:

/home/melmoth/dev/ankiswordstuff/bin/python 

imort Sword
import sys
from bs4 import BeautifulSoup
import genanki


#####################

cd ~/tmp/sword-1.8.1/bindings/swig/package
./autogen.sh

./configure PKG_CONFIG_PATH=/usr/local/sword/lib/pkgconfig CPPFLAGS="-I/usr/local/sword/include/" --with-python=/home/melmoth/dev/ankiswordstuff/bin/python3
# same pb with ./configure PKG_CONFIG_PATH=/usr/local/sword/lib/pkgconfig CPPFLAGS="-I/usr/local/sword/include/" --with-python=/usr/bin/python3


make pythonswig
PKG_CONFIG_PATH=/usr/local/sword/lib/pkgconfig CPPFLAGS="-I/usr/local/sword/include/" make python_make
cd python
################### Put the modified setup.py #############
#! /usr/bin/python

from distutils.core import setup
from distutils.extension import Extension
import subprocess

def pkgconfig(*packages, **kw):
        flag_map = {'-I': 'include_dirs', '-L': 'library_dirs', '-l': 'libraries'}
        #for token in subprocess.run("pkg-config --libs --cflags %s" % ' '.join(packages), capture_output=True).split():
        for token in ["-I/usr/local/sword/include/sword","-L/usr/local/sword/lib","-lsword"]:
                if token[:2] in flag_map:
                        kw.setdefault(flag_map.get(token[:2]), []).append(token[2:])
                else: # throw others to extra_link_args
                        kw.setdefault('extra_link_args', []).append(token)
        for k, v in kw.items(): # remove duplicated
                kw[k] = list(set(v))
        return kw

setup (name = "sword",
        version = "1.6.2",
        maintainer = "Sword Developers",
        maintainer_email = "sword-devel@crosswire.org",
        url = "http://www.crosswire.org/sword",
        py_modules = ["Sword"],
        include_dirs=['..', '../..'],
        ext_modules = [Extension("_Sword", ["Sword.cxx"], **pkgconfig('sword')
        )],
)

############################################################
python setup.py install

##########################
#Just to remember the url where i posted stuff: http://cocreator.byethost22.com/ankisword/

