#Genanki python stuff

#git checkout https://github.com/kerrickstaley/genanki.git
git clone https://github.com/kerrickstaley/genanki.git
mkdir ~/dev/ankiswordstuff
virtualenv -p /usr/bin/python3 ~/dev/ankiswordstuff
. ~/dev/ankiswordstuff/bin/activate

cd genanki
python setup.py install

##################
#sword stuff
##################
#as root
mkdir /usr/local/sword
chown melmoth /usr/local/sword

#yum install cmake cmake-data openssl-devel curl-devel zlib-devel libidn-devel libicu-devel icu clucene-core-devel cppunit-devel swig  python3-devel gcc  gcc-c++
yum install cmake3 cmake3-data openssl-devel curl-devel zlib-devel libidn-devel libicu-devel icu clucene-core-devel cppunit-devel swig  python36-devel gcc  gcc-c++ 

#debian:
sudo apt-get install g++ swig python-all-dev libtool automake autoconf libcurl4-openssl-dev libclucene-dev  \
  make  python-virtualenv libicu-dev subversion build-essential pkg-config

#as the regular user:
# Lets get the svn tree so we can build the python3 module.
# https://src.fedoraproject.org/rpms/sword/blob/master/f/sword.spec
cd
cd tmp
svn co http://crosswire.org/svn/sword/trunk/
mv trunk sword-trunk
cd sword-trunk

mkdir build
cd build

#use cmake in debian 
cmake3 -DLIBSWORD_LIBRARY_TYPE=Shared \
       -DSWORD_PYTHON_3:BOOL=TRUE \
       -DSWORD_BUILD_UTILITIES="Yes" \
       -DLIBSWORD_SOVERSION=1.8 \
       -DCMAKE_INSTALL_PREFIX="/usr/local/sword" \
       -DSWORD_BUILD_TESTS=Yes \
       -DSWORD_BUILD_EXAMPLES=Yes \
       -DSWORD_PYTHON_INSTALL_DIR="/usr/local/sword/python3" \
       ..

make
make install
####################"


cat >> ~/dev/ankiswordstuff/env-sword-anki.sh <<EOF
export PATH=$PATH:/usr/local/sword/bin/
export LD_LIBRARY_PATH=/usr/local/sword/lib
export PKG_CONFIG_PATH=/usr/local/sword/lib/pkgconfig
export CPPFLAGS="-I/usr/local/sword/include/sword"
export PYTHONPATH=$PYTHONPATH:/usr/local/sword/python3/lib64/python3.4/site-packages:/usr/local/sword/python3/lib/python3.7/site-packages
EOF

. ~/dev/ankiswordstuff/env-sword-anki.sh

##########################
Now let s use https://github.com/kerrickstaley/genanki

. ~/dev/ankiswordstuff/bin/activate
. ~/dev/ankiswordstuff/env-sword-anki.sh

pip install bs4
###################
# Check you can import the needed modules:

/home/melmoth/dev/ankiswordstuff/bin/python 

import Sword
import sys
from bs4 import BeautifulSoup
import genanki

#####################
#Modules stuff
installmgr -r CrossWire
installmgr -ri CrossWire Byz
installmgr -ri CrossWire OSHB
installmgr -ri CrossWire MorphGNT
installmgr -r "Xiphos"
installmgr -ri Xiphos StrongsRealGreek
installmgr -ri Xiphos StrongsRealHebrew

#If you do not build the clucene index, there will be no sample sentence in he notes.
mkfastmod Byz
mkfastmod OSHB
mkfastmod MorphGNT

##########################
#Just to remember the url where i posted stuff: http://cocreator.byethost22.com/ankisword/
##########################
Creating a filtered deck with new vocab only:

(tag:Ps-006:006 or tag:Ps-006:007) -is:review

